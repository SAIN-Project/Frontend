!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@angular/elements"),require("rete")):"function"==typeof define&&define.amd?define("rete-angular-render-plugin",["exports","@angular/core","@angular/common","@angular/elements","rete"],t):t((e=e||self)["rete-angular-render-plugin"]={},e.ng.core,e.ng.common,e.ng.elements,e.rete)}(this,(function(e,t,n,o,r){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function i(e,t,n,o){var r,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,o);else for(var p=e.length-1;p>=0;p--)(r=e[p])&&(c=(i<3?r(c):i>3?r(t,n,c):r(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c}var c=function(){function e(){}return e.prototype.setBindings=function(e,t){this.bindSocket=e,this.bindControl=t},e=i([t.Injectable()],e)}(),p=function(){function e(e,t){this.service=e,this.cdr=t}return e.prototype.ngOnInit=function(){var e=this;this.service.setBindings(this.bindSocket,this.bindControl),this.node.update=function(){return e.cdr.detectChanges()}},Object.defineProperty(e.prototype,"inputs",{get:function(){return Array.from(this.node.inputs.values())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputs",{get:function(){return Array.from(this.node.outputs.values())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"controls",{get:function(){return Array.from(this.node.controls.values())},enumerable:!0,configurable:!0}),e.prototype.selected=function(){return this.editor.selected.contains(this.node)?"selected":""},e.ctorParameters=function(){return[{type:c},{type:t.ChangeDetectorRef}]},i([t.Input()],e.prototype,"editor",void 0),i([t.Input()],e.prototype,"node",void 0),i([t.Input()],e.prototype,"bindSocket",void 0),i([t.Input()],e.prototype,"bindControl",void 0),e=i([t.Component({template:'<div class="node" [ngClass]="[selected(), node.name] | kebab">\n    <div class="title">{{node.name}}</div>\n    <div class="output" *ngFor="let output of outputs">\n        <div class="output-title">{{output.name}}</div>\n        <rete-socket rete-socket [io]="output" [socket]="output.socket"></rete-socket>\n    </div>\n    <div class="control" *ngFor="let control of controls" [rete-control]="control"></div>\n    <div class="input" *ngFor="let input of inputs">\n        <rete-socket rete-socket [io]="input" [socket]="input.socket"></rete-socket>\n        <div class="input-title" *ngIf="!input.showControl()">{{input.name}}</div>\n        <div class="input-control" *ngIf="input.showControl()" [rete-control]="input.control"></div>\n    </div>\n</div>',providers:[c],changeDetection:t.ChangeDetectionStrategy.OnPush,styles:[".node{background:rgba(110,136,255,.8);border:2px solid #4e58bf;border-radius:10px;cursor:pointer;min-width:180px;height:auto;padding-bottom:6px;box-sizing:content-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.node:hover{background:rgba(130,153,255,.8)}.node.selected{background:#ffd92c;border-color:#e3c000}.node .title{color:#fff;font-family:sans-serif;font-size:18px;padding:8px}.node .output{text-align:right}.node .input{text-align:left}.node .input-title,.node .output-title{vertical-align:middle;color:#fff;display:inline-block;font-family:sans-serif;font-size:14px;margin:6px;line-height:24px}.node .input-title[hidden],.node .output-title[hidden]{display:none}.node .input-control{z-index:1;width:calc(100% - 36px);vertical-align:middle;display:inline-block}.node .control{padding:6px 18px}"]})],e)}(),s=function(){function e(){}return e.prototype.replace=function(e){return e.toLowerCase().replace(/ /g,"-")},e.prototype.transform=function(e){var t=this;return Array.isArray(e)?e.map((function(e){return t.replace(e)})):this.replace(e)},e=i([t.Pipe({name:"kebab"})],e)}(),u=function(){function e(){}return Object.defineProperty(e.prototype,"type",{get:function(){return this.io instanceof r.Input?"input":"output"},enumerable:!0,configurable:!0}),i([t.Input()],e.prototype,"socket",void 0),i([t.Input()],e.prototype,"io",void 0),e=i([t.Component({selector:"rete-socket",template:'<div *ngIf="socket" class="socket" [ngClass]="[type, socket.name]" [title]="socket.name"></div>',changeDetection:t.ChangeDetectionStrategy.OnPush,styles:[":host{display:inline-block}.socket{display:inline-block;cursor:pointer;border:1px solid #fff;border-radius:12px;width:24px;height:24px;margin:6px;vertical-align:middle;background:#96b38a;z-index:2;box-sizing:border-box}.socket:hover{border-width:4px}.socket.multiple{border-color:#ff0}.socket.output{margin-right:-12px}.socket.input{margin-left:-12px}"]})],e)}(),l=function(){function e(e,t){this.el=e,this.service=t}return e.prototype.ngOnInit=function(){this.service.bindControl(this.el.nativeElement,this.control)},e.ctorParameters=function(){return[{type:t.ElementRef},{type:c}]},i([t.Input("rete-control")],e.prototype,"control",void 0),e=i([t.Directive({selector:"[rete-control]"})],e)}(),d=function(){function e(e,t){this.el=e,this.service=t}return Object.defineProperty(e.prototype,"type",{get:function(){return this.io instanceof r.Input?"input":"output"},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.service.bindSocket(this.el.nativeElement,this.type,this.io)},e.ctorParameters=function(){return[{type:t.ElementRef},{type:c}]},i([t.Input()],e.prototype,"io",void 0),e=i([t.Directive({selector:"[rete-socket]"})],e)}(),a=function(){function e(e,t,n){this.vcr=e,this.injector=t,this.factoryResolver=n}return e.prototype.ngOnInit=function(){var e=this.factoryResolver.resolveComponentFactory(this.component).create(this.injector),t=this.props,n=function(n){Object.defineProperty(e.instance,n,{get:function(){return t[n]},set:function(e){t[n]=e}})};for(var o in t)n(o);this.vcr.insert(e.hostView)},e.prototype.ngOnDestroy=function(){this.vcr.detach(0)},e.ctorParameters=function(){return[{type:t.ViewContainerRef},{type:t.Injector},{type:t.ComponentFactoryResolver}]},i([t.Input()],e.prototype,"component",void 0),i([t.Input()],e.prototype,"props",void 0),e=i([t.Component({template:"",changeDetection:t.ChangeDetectionStrategy.OnPush})],e)}(),f=function(){function e(e){var t=o.createCustomElement(a,{injector:e});customElements.get("rete-element")||customElements.define("rete-element",t)}return e.ctorParameters=function(){return[{type:t.Injector}]},e=i([t.NgModule({declarations:[p,u,a,l,d,s],imports:[n.CommonModule],providers:[s,l],exports:[p,a,u,l,d,s],entryComponents:[p,u,a]})],e)}();var m={name:"angular-render",install:function(e,t){void 0===t&&(t={}),e.on("rendernode",(function(n){var o=n.el,r=n.node,i=n.component,c=n.bindControl,s=n.bindSocket,u=i;if(!u.render||"angular"===u.render){var l=document.createElement("rete-element"),d=l;d.component=u.component||t.component||p,d.props=Object.assign({},u.props||{},{node:r,editor:e,bindControl:c,bindSocket:s}),o.appendChild(l)}})),e.on("rendercontrol",(function(e){var t=e.el,n=e.control;if(!n.render||"angular"===n.render){var o=document.createElement("rete-element"),r=o;r.component=n.component,r.props=n.props,t.appendChild(o)}})),e.on(["connectioncreated","connectionremoved"],(function(e){e.output.node.update(),e.input.node.update()})),e.on("nodeselected",(function(){e.nodes.forEach((function(e){return e.update()}))}))}};e.AngularRenderPlugin=m,e.NodeComponent=p,e.NodeService=c,e.ReteModule=f,e.SocketComponent=u,e.ɵa=a,e.ɵb=l,e.ɵc=d,e.ɵd=s,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=rete-angular-render-plugin.umd.min.js.map