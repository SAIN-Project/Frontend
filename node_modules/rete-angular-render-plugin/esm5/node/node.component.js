import * as tslib_1 from "tslib";
import { Component, Input, ChangeDetectionStrategy, ChangeDetectorRef } from '@angular/core';
import { NodeService } from '../node.service';
var NodeComponent = /** @class */ (function () {
    function NodeComponent(service, cdr) {
        this.service = service;
        this.cdr = cdr;
    }
    NodeComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.service.setBindings(this.bindSocket, this.bindControl);
        this.node.update = function () { return _this.cdr.detectChanges(); };
    };
    Object.defineProperty(NodeComponent.prototype, "inputs", {
        get: function () {
            return Array.from(this.node.inputs.values());
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NodeComponent.prototype, "outputs", {
        get: function () {
            return Array.from(this.node.outputs.values());
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NodeComponent.prototype, "controls", {
        get: function () {
            return Array.from(this.node.controls.values());
        },
        enumerable: true,
        configurable: true
    });
    NodeComponent.prototype.selected = function () {
        return this.editor.selected.contains(this.node) ? 'selected' : '';
    };
    NodeComponent.ctorParameters = function () { return [
        { type: NodeService },
        { type: ChangeDetectorRef }
    ]; };
    tslib_1.__decorate([
        Input()
    ], NodeComponent.prototype, "editor", void 0);
    tslib_1.__decorate([
        Input()
    ], NodeComponent.prototype, "node", void 0);
    tslib_1.__decorate([
        Input()
    ], NodeComponent.prototype, "bindSocket", void 0);
    tslib_1.__decorate([
        Input()
    ], NodeComponent.prototype, "bindControl", void 0);
    NodeComponent = tslib_1.__decorate([
        Component({
            template: "<div class=\"node\" [ngClass]=\"[selected(), node.name] | kebab\">\n    <div class=\"title\">{{node.name}}</div>\n    <div class=\"output\" *ngFor=\"let output of outputs\">\n        <div class=\"output-title\">{{output.name}}</div>\n        <rete-socket rete-socket [io]=\"output\" [socket]=\"output.socket\"></rete-socket>\n    </div>\n    <div class=\"control\" *ngFor=\"let control of controls\" [rete-control]=\"control\"></div>\n    <div class=\"input\" *ngFor=\"let input of inputs\">\n        <rete-socket rete-socket [io]=\"input\" [socket]=\"input.socket\"></rete-socket>\n        <div class=\"input-title\" *ngIf=\"!input.showControl()\">{{input.name}}</div>\n        <div class=\"input-control\" *ngIf=\"input.showControl()\" [rete-control]=\"input.control\"></div>\n    </div>\n</div>",
            providers: [NodeService],
            changeDetection: ChangeDetectionStrategy.OnPush,
            styles: [".node{background:rgba(110,136,255,.8);border:2px solid #4e58bf;border-radius:10px;cursor:pointer;min-width:180px;height:auto;padding-bottom:6px;box-sizing:content-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.node:hover{background:rgba(130,153,255,.8)}.node.selected{background:#ffd92c;border-color:#e3c000}.node .title{color:#fff;font-family:sans-serif;font-size:18px;padding:8px}.node .output{text-align:right}.node .input{text-align:left}.node .input-title,.node .output-title{vertical-align:middle;color:#fff;display:inline-block;font-family:sans-serif;font-size:14px;margin:6px;line-height:24px}.node .input-title[hidden],.node .output-title[hidden]{display:none}.node .input-control{z-index:1;width:calc(100% - 36px);vertical-align:middle;display:inline-block}.node .control{padding:6px 18px}"]
        })
    ], NodeComponent);
    return NodeComponent;
}());
export { NodeComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9yZXRlLWFuZ3VsYXItcmVuZGVyLXBsdWdpbi8iLCJzb3VyY2VzIjpbIm5vZGUvbm9kZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFLHVCQUF1QixFQUFFLGlCQUFpQixFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRTdGLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQVE5QztJQU1FLHVCQUFzQixPQUFvQixFQUFZLEdBQXNCO1FBQXRELFlBQU8sR0FBUCxPQUFPLENBQWE7UUFBWSxRQUFHLEdBQUgsR0FBRyxDQUFtQjtJQUFHLENBQUM7SUFFaEYsZ0NBQVEsR0FBUjtRQUFBLGlCQUdDO1FBRkMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDNUQsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsY0FBTSxPQUFBLEtBQUksQ0FBQyxHQUFHLENBQUMsYUFBYSxFQUFFLEVBQXhCLENBQXdCLENBQUM7SUFDcEQsQ0FBQztJQUVELHNCQUFJLGlDQUFNO2FBQVY7WUFDRSxPQUFPLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQztRQUMvQyxDQUFDOzs7T0FBQTtJQUVELHNCQUFJLGtDQUFPO2FBQVg7WUFDRSxPQUFPLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQztRQUNoRCxDQUFDOzs7T0FBQTtJQUVELHNCQUFJLG1DQUFRO2FBQVo7WUFDRSxPQUFPLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQztRQUNqRCxDQUFDOzs7T0FBQTtJQUVELGdDQUFRLEdBQVI7UUFDRSxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO0lBQ3BFLENBQUM7O2dCQXJCOEIsV0FBVztnQkFBaUIsaUJBQWlCOztJQUxuRTtRQUFSLEtBQUssRUFBRTtpREFBcUI7SUFDcEI7UUFBUixLQUFLLEVBQUU7K0NBQWE7SUFDWjtRQUFSLEtBQUssRUFBRTtxREFBdUI7SUFDdEI7UUFBUixLQUFLLEVBQUU7c0RBQXdCO0lBSnJCLGFBQWE7UUFOekIsU0FBUyxDQUFDO1lBQ1QseXlCQUFvQztZQUVwQyxTQUFTLEVBQUUsQ0FBQyxXQUFXLENBQUM7WUFDeEIsZUFBZSxFQUFFLHVCQUF1QixDQUFDLE1BQU07O1NBQ2hELENBQUM7T0FDVyxhQUFhLENBNEJ6QjtJQUFELG9CQUFDO0NBQUEsQUE1QkQsSUE0QkM7U0E1QlksYUFBYSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQsIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LCBDaGFuZ2VEZXRlY3RvclJlZiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgTm9kZUVkaXRvciwgTm9kZSwgSW5wdXQgYXMgUmV0ZUlucHV0LCBPdXRwdXQgYXMgUmV0ZU91dHB1dCwgQ29udHJvbCBhcyBSZXRlQ29udHJvbCB9IGZyb20gJ3JldGUnO1xuaW1wb3J0IHsgTm9kZVNlcnZpY2UgfSBmcm9tICcuLi9ub2RlLnNlcnZpY2UnO1xuXG5AQ29tcG9uZW50KHtcbiAgdGVtcGxhdGVVcmw6ICcuL25vZGUuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9ub2RlLmNvbXBvbmVudC5zYXNzJ10sXG4gIHByb3ZpZGVyczogW05vZGVTZXJ2aWNlXSxcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2hcbn0pXG5leHBvcnQgY2xhc3MgTm9kZUNvbXBvbmVudCB7XG4gIEBJbnB1dCgpIGVkaXRvciE6IE5vZGVFZGl0b3I7XG4gIEBJbnB1dCgpIG5vZGUhOiBOb2RlO1xuICBASW5wdXQoKSBiaW5kU29ja2V0ITogRnVuY3Rpb247XG4gIEBJbnB1dCgpIGJpbmRDb250cm9sITogRnVuY3Rpb247XG5cbiAgY29uc3RydWN0b3IocHJvdGVjdGVkIHNlcnZpY2U6IE5vZGVTZXJ2aWNlLCBwcm90ZWN0ZWQgY2RyOiBDaGFuZ2VEZXRlY3RvclJlZikge31cblxuICBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLnNlcnZpY2Uuc2V0QmluZGluZ3ModGhpcy5iaW5kU29ja2V0LCB0aGlzLmJpbmRDb250cm9sKTtcbiAgICB0aGlzLm5vZGUudXBkYXRlID0gKCkgPT4gdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xuICB9XG5cbiAgZ2V0IGlucHV0cygpIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLm5vZGUuaW5wdXRzLnZhbHVlcygpKTtcbiAgfVxuXG4gIGdldCBvdXRwdXRzKCkge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMubm9kZS5vdXRwdXRzLnZhbHVlcygpKTtcbiAgfVxuXG4gIGdldCBjb250cm9scygpIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLm5vZGUuY29udHJvbHMudmFsdWVzKCkpO1xuICB9XG5cbiAgc2VsZWN0ZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZWRpdG9yLnNlbGVjdGVkLmNvbnRhaW5zKHRoaXMubm9kZSkgPyAnc2VsZWN0ZWQnIDogJyc7XG4gIH1cbn1cbiJdfQ==